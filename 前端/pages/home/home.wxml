<view class="home-container">
  <!-- æœç´¢æ¡† -->
  <view class="search-container">
    <view class="search-bar">
      <view class="search-icon-box">
        <view class="search-icon">ğŸ”</view>
      </view>
      <input class="search-input" type="text" placeholder="æœç´¢çŒ«å’ªå†…å®¹..." confirm-type="search" 
        value="{{searchKeyword}}" bindinput="onSearchInput" bindconfirm="doSearch" />
      <view class="search-btn-box" wx:if="{{searchKeyword}}">
        <view class="search-clear-btn" bindtap="clearSearch">âœ•</view>
      </view>
      <view class="search-action-btn" bindtap="doSearch">æœç´¢</view>
    </view>
  </view>

  <!-- ä¸»å†…å®¹åŒº -->
  <view class="page-content" hidden="{{currentTab !== 'hot'}}">
    <!-- æœç´¢æ¨¡å¼æç¤º -->
    <view class="search-mode-hint" wx:if="{{isSearchMode}}">
      <text>æœç´¢: "{{searchKeyword}}"</text>
      <text class="clear-search-text" bindtap="clearSearch">æ¸…é™¤æœç´¢</text>
    </view>
    
    <!-- ä¸‹æ‹‰åˆ·æ–°åŒºåŸŸ -->
    <view class="refresh-container" wx:if="{{isRefreshing}}">
      <view class="cat-refresh">
        <view class="cat-face"></view>
        <view class="refresh-ear left"></view>
        <view class="refresh-ear right"></view>
        <view class="refresh-text">å–µå–µåŠ è½½ä¸­...</view>
      </view>
    </view>

    <scroll-view scroll-y="true" class="waterfall" bindscrolltolower="loadMore" refresher-enabled="{{true}}" refresher-triggered="{{isRefreshing}}" bindrefresherrefresh="onRefresh">
      <view class="masonry">
        <block wx:if="{{posts.length > 0}}">
          <block wx:for="{{posts}}" wx:key="article_id">
            <view class="post-card" bindtap="goPostDetail" data-post="{{item}}">
              <!-- å›¾ç‰‡å ä½ç¬¦å’ŒåŠ è½½æ•ˆæœ -->
              <view class="image-placeholder" wx:if="{{!item.imageLoaded}}">
                <view class="loading-spinner"></view>
              </view>
              <image src="{{item.img}}" class="post-img" mode="widthFix" lazy-load="true" bindload="onImageLoad" data-index="{{index}}"/>
              
              <view class="post-content-container">
                <view class="post-title">{{item.title}}</view>
                <view class="post-content">{{item.content}}</view>
                <view class="post-footer">
                  <view class="user-info">
                    <view class="user-avatar"></view>
                    <text class="footer-post_user_name">{{item.post_user_name}}</text>
                  </view>
                  <view class="post-stats">
                    <view class="stat-item">
                      <view class="stat-icon like-icon"></view>
                      <text class="stat-count">0</text>
                    </view>
                    <view class="stat-item">
                      <view class="stat-icon comment-icon"></view>
                      <text class="stat-count">0</text>
                    </view>
                  </view>
                </view>
              </view>
            </view>
          </block>
        </block>
        
        <!-- ç©ºçŠ¶æ€ -->
        <view class="empty-state" wx:if="{{posts.length === 0 && !isLoading}}">
          <image class="empty-state-icon" src="../../assets/avatar1.jpg" mode="aspectFill"></image>
          <view class="empty-state-text">è¿˜æ²¡æœ‰çŒ«å’ªå†…å®¹</view>
          <view class="empty-state-subtext">å¿«æ¥å‘å¸ƒç¬¬ä¸€ç¯‡çŒ«å’ªåŠ¨æ€å§!</view>
          <button class="empty-state-btn" bindtap="goToPosting">ç«‹å³å‘å¸ƒ</button>
        </view>
      </view>
      
      <!-- åŠ è½½æ›´å¤šçŠ¶æ€ -->
      <view class="loading-container" wx:if="{{isLoadingMore}}">
        <view class="paw-loading">
          <view class="paw-dot"></view>
          <view class="paw-dot"></view>
          <view class="paw-dot"></view>
        </view>
      </view>
    </scroll-view>
  </view>
</view> 

